Crie uma nova pÃ¡gina chamada â€œAdministraÃ§Ã£o de Casas de Apostasâ€ (/admin/houses) que seja totalmente funcional, de acordo com o banco de dados abaixo e com as seguintes regras:

ğŸ”§ Banco de Dados e Estrutura Base
Tabela principal: betting_houses

Tabelas relacionadas:

registered_postbacks (postbacks registrados por casa)

affiliate_links (para ativaÃ§Ã£o/desativaÃ§Ã£o)

conversions (CPA, RevShare)

postback_logs (logs de auditoria de postbacks)

Tokens de seguranÃ§a das casas devem ser imutÃ¡veis e usados nas URLs.

ğŸ§± SeÃ§Ãµes da PÃ¡gina
1. ğŸ“‹ Listagem das Casas de Apostas
Tabela com as seguintes colunas:

Nome da Casa (name)

Tipo de ComissÃ£o (commission_type)

Exibir mÃºltiplos tipos se aplicÃ¡vel (Ex: â€œCPA + RevShareâ€)

Valores:

CPA (cpa_value) â€” mostrar R$

RevShare (revshare_value) â€” mostrar %

Hybrid = mostrar cpa e revshare em conjunto mas cada um tera seu valor

URL base (base_url)

Token de SeguranÃ§a (security_token) visualizaÃ§Ã£o apenas

Status (Ativa/Inativa)

AÃ§Ãµes:

âœï¸ Editar

ğŸ” Gerenciar Postbacks (abre modal)

ğŸ‘ï¸ PrÃ©-visualizar postbacks (copia/visualiza links)

ğŸš« Inativar

Importante: O token nÃ£o deve ser editÃ¡vel em nenhuma situaÃ§Ã£o.

2. ğŸ†• CriaÃ§Ã£o de Nova Casa
FormulÃ¡rio com os seguintes campos (baseado na tabela betting_houses):

Campo	Tipo	Regras
Nome (name)	texto	obrigatÃ³rio
DescriÃ§Ã£o (description)	texto	opcional
URL base (base_url)	texto	obrigatÃ³rio
ParÃ¢metro principal (primary_param)	texto	obrigatÃ³rio
ParÃ¢metros adicionais (additional_params)	JSON	opcional
Tipo de ComissÃ£o (commission_type)	select: cpa, revshare, cpa+revshare	obrigatÃ³rio
Valor CPA (cpa_value)	monetÃ¡rio	opcional
Valor RevShare (revshare_value)	percentual	opcional
DepÃ³sito mÃ­nimo (min_deposit)	monetÃ¡rio	opcional
MÃ©todos de pagamento (payment_methods)	texto	opcional
Ativo (is_active)	checkbox	default true
Token (security_token)	gerado automaticamente	nÃ£o editÃ¡vel
ParÃ¢metros de Mapeamento (parameter_mapping)	JSON	opcional

ğŸ›  Funcionalidade extra ao criar:

Gerar automaticamente o security_token (UUID seguro).

Criar automaticamente os seguintes postbacks em registered_postbacks com base no token:

/postback/click?token={token}

/postback/register?token={token}

/postback/deposit?token={token}

/postback/revenue?token={token}

Os postbacks devem vir com event_type, house_id, house_name, url, is_active = true.

3. ğŸ§¾ EdiÃ§Ã£o de Casa
Mesma interface do formulÃ¡rio de criaÃ§Ã£o, porÃ©m:

Campo security_token deve aparecer, mas bloqueado para ediÃ§Ã£o.

Permitir alterar todos os campos, exceto o token.

Mostrar visualizaÃ§Ã£o dos postbacks associados.

Permitir ativar/desativar postbacks especÃ­ficos.

4. ğŸ“© Modal de Gerenciar Postbacks (por Casa)
Ao clicar em "Postbacks" em uma casa especÃ­fica:

Abrir modal com todos os postbacks registrados (registered_postbacks) daquela casa.

Listar por colunas:

Tipo do Evento (click, register, deposit, revenue)

URL completa com token

Origem (AutomÃ¡tico ou Manual)

Status (Ativo/Inativo)

AÃ§Ã£o: âœ… Copiar Link | ğŸ›  Editar | ğŸš« Desativar

ğŸ”˜ Permitir adicionar um novo postback manualmente:

Campos:

Tipo de Evento (event_type)

DescriÃ§Ã£o

Ativo/Inativo

ğŸ”§ A URL deve ser montada automaticamente com o token da casa:

bash
Copiar
Editar
/postback/{event_type}?token={security_token}
5. ğŸ‘ï¸ PrÃ©-visualizaÃ§Ã£o de Postbacks na CriaÃ§Ã£o/EdiÃ§Ã£o
Abaixo do formulÃ¡rio de criaÃ§Ã£o/ediÃ§Ã£o, exibir um bloco de visualizaÃ§Ã£o com os 4 postbacks padrÃ£o jÃ¡ montados:

Exemplo:

Click: /postback/click?token=abc123xyz

Registro: /postback/register?token=abc123xyz

DepÃ³sito: /postback/deposit?token=abc123xyz

Receita: /postback/revenue?token=abc123xyz

BotÃµes ao lado de cada um: â€œğŸ“‹ Copiar URLâ€

ğŸ” SeguranÃ§a e Auditoria
O sistema deve localizar a casa de apostas pelo token recebido no postback.

Todos os postbacks recebidos devem ser registrados em postback_logs com:

casa, subid, evento, valor, status, ip, raw, timestamp

Nunca permitir que o token seja editado por painel, API ou qualquer outra forma.

ğŸ§  Extras (Recomendado)
ğŸ” Filtro por nome da casa ou token

ğŸ“Š Contador de afiliados ativos por casa

ğŸ§¾ VisualizaÃ§Ã£o rÃ¡pida do total de comissÃµes por casa (CPA/RevShare)

ğŸ’¬ Tooltip explicativo para diferenÃ§a de CPA e RevShare