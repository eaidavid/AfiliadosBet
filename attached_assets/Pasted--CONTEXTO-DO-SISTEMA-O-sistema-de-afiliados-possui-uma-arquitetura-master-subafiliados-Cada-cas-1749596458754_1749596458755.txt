ğŸ¯ CONTEXTO DO SISTEMA
O sistema de afiliados possui uma arquitetura master â†’ subafiliados.
Cada casa de aposta possui uma comissÃ£o original (RevShare ou CPA), configurada no backend, que representa o valor bruto pago pela casa ao master.

Contudo, o master pode definir um percentual de repasse para seus afiliados, e o sistema jÃ¡ calcula esse valor no backend.

Atualmente, na listagem de casas disponÃ­veis para afiliaÃ§Ã£o (painel do afiliado), o sistema ainda exibe os valores brutos da casa, o que gera falsa expectativa de ganhos.

ğŸ§© O QUE DEVE SER REVISTO E AJUSTADO
1. TELA OU COMPONENTE ENVOLVIDO

Painel do afiliado â†’ â€œCasas disponÃ­veis para se afiliarâ€

Cada card, bloco ou linha de casa exibe hoje:

RevShare: 35% (errado: valor da casa)

CPA: R$500 (errado: valor bruto)

2. LÃ“GICA DE EXIBIÃ‡ÃƒO CORRETA
Para cada casa listada ao afiliado:

Se a comissÃ£o for RevShare:

Mostrar: RevShare: XX% (XX = valor configurado de repasse ao afiliado)

Exemplo: se a casa paga 35%, mas o master repassa 20%, mostrar: RevShare: 20%

Se a comissÃ£o for CPA:

Mostrar: CPA: R$YYY (YYY = valor configurado de repasse ao afiliado)

Exemplo: se a casa paga R$500, mas o master repassa 60%, mostrar: CPA: R$300

Nunca mostrar o valor bruto da casa para o afiliado, apenas o valor repassado.

ğŸ“Œ CAMPOS USADOS PARA O CÃLCULO
As informaÃ§Ãµes usadas estÃ£o divididas entre duas fontes:

TABELA betting_houses:

commission_type (revshare ou cpa)

revshare_value â†’ valor bruto da casa (ex: 35)

cpa_value â†’ valor bruto da casa (ex: 500)

(NOVO) Ponto de personalizaÃ§Ã£o de repasse:

Deve haver uma estrutura (fixa ou dinÃ¢mica) que indique:

% de repasse do RevShare para o afiliado

% de repasse do CPA para o afiliado

Esse valor pode estar em uma tabela de relaÃ§Ã£o entre user_id e house_id, ou em affiliate_links, conversions ou estrutura auxiliar (como uma tabela commission_rules).

âš ï¸ IMPORTANTE â€” AÃ‡ÃƒO ESPERADA PELA IA
Identificar se hÃ¡ repasse configurado para cada afiliado por casa.

Calcular corretamente o valor a ser mostrado, aplicando:

revshare_repassado = revshare_value * percentual_repassado / 100

cpa_repassado = cpa_value * percentual_repassado / 100

Mostrar apenas esse valor final no frontend.

Nunca mostrar os valores brutos da casa para o afiliado comum.

(Opcional, mas recomendÃ¡vel): incluir uma descriÃ§Ã£o adicional como:

"ComissÃ£o lÃ­quida repassada a vocÃª"

"VocÃª receberÃ¡ atÃ© 20% sobre a receita do jogador"

âœ… EXEMPLO CORRETO DE EXIBIÃ‡ÃƒO (APÃ“S A APLICAÃ‡ÃƒO)
Supondo:
A casa "Bet365" tem RevShare de 35%

O master configurou que os afiliados recebem 20%

Painel do afiliado deverÃ¡ mostrar:

plaintext
Copiar
Editar
ğŸ  Bet365
ğŸ” RevShare: 20%
â„¹ï¸ VocÃª receberÃ¡ 20% sobre a receita dos jogadores indicados.
Supondo:
A casa "Blaze" tem CPA de R$500

O master repassa 60%

Painel do afiliado deverÃ¡ mostrar:

plaintext
Copiar
Editar
ğŸ  Blaze
ğŸ’° CPA: R$300,00
â„¹ï¸ VocÃª receberÃ¡ R$300 por jogador qualificado.
