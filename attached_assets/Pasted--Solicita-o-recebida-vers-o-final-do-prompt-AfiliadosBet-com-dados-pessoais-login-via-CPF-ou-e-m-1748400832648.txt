**SolicitaÃ§Ã£o recebida: versÃ£o final do prompt AfiliadosBet com dados pessoais, login via CPF ou e-mail, banco de dados consolidado e estrutura otimizada.**
ğŸ”¥ *Modo engenheiro de sistemas com foco em banco relacional limpo e funcional ativado.*

---

### âœ… PROMPT FINAL â€” PRONTO PARA COLAR NA IA DO REPLIT

```
Crie um sistema web completo chamado **AfiliadosBet**, com frontend em React.js e backend em Node.js (Express), para gerenciar afiliados de casas de apostas online com autenticaÃ§Ã£o segura e painel para usuÃ¡rios e administradores.

ğŸ—ï¸ STACK TECNOLÃ“GICA
- Frontend: React.js (Vite) + TailwindCSS + React Router + Axios
- Backend: Node.js + Express + Prisma ORM
- Banco de dados: PostgreSQL (estruturado de forma consolidada)
- AutenticaÃ§Ã£o: JWT + Bcrypt
- ValidaÃ§Ã£o: Zod (opcional mas recomendado)
- Armazenamento de logo: base64 simples
- GrÃ¡ficos: Chart.js no frontend

ğŸ“ ESTRUTURA DO PROJETO
```

txt
afiliadosbet/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ middlewares/
â”‚   â”œâ”€â”€ utils/
â”‚   â””â”€â”€ server.js
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ services/
â”‚   â””â”€â”€ App.jsx

```

---

ğŸ” AUTENTICAÃ‡ÃƒO E CADASTRO
UsuÃ¡rio pode fazer login com **CPF ou e-mail**.  
Tabela `User` deve conter os seguintes campos:
- id (PK)
- nome_completo
- cpf (Ãºnico)
- email (Ãºnico)
- senha_hash
- data_nascimento
- telefone
- role (`user` ou `admin`)
- mÃ©todo_pagamento
	cadastrar no perfil do usuÃ¡rio
- criado_em

---

ğŸ“„ TABELAS (POSTGRES via Prisma ORM)
- **User**: todos os dados pessoais e controle de acesso (role)
- **BettingHouse**: casas de apostas
  - id, nome, descricao, logo, link_base, tipo_comissao, rotas_postback
- **Afiliacao**: vincula usuÃ¡rio a casas
  - id, user_id, casa_id, link_afiliado_gerado, data_afiliacao
- **Transacao**: comissÃ£o recebida por afiliado
  - id, afiliacao_id, tipo (registro, depÃ³sito, lucro), valor, timestamp
- (Evite criar tabelas desnecessÃ¡rias)

---

ğŸ¯ PAINEL DO USUÃRIO (AFILIADO)
- Tela de cadastro/login com CPF, email e senha
- tela de cadastro deve pedir:

- usuÃ¡rio (alfanÃºmerico de no mÃ­nimo 6 dÃ­gitos (serÃ¡ o id)
- nome_completo
- cpf (Ãºnico)
- email (Ãºnico)
- senha_hash
- data_nascimento
- telefone

- Painel com:
  - Lista de casas disponÃ­veis
  	- BotÃ£o â€œSe afiliarâ€ â†’ gera link com `subid={id_usuario}`
  - HistÃ³rico de transaÃ§Ãµes com valor e data(dasboard financeiro)
  	- Saldo atual (somatÃ³rio das transaÃ§Ãµes)
  -SeÃ§Ã£o de "meus links" com todas as casas que o usuÃ¡rio se afiliou
- SeÃ§Ã£o â€œMeus dadosâ€ com CPF, telefone, email, data de nascimento, mÃ©todo de pagamento

---

ğŸ› ï¸ PAINEL DO ADMIN
- Gerenciar casa de aposta:
  Cadastrar casas com:
	- nome, descriÃ§Ã£o, logo (url), link_base
  	- tipo de comissÃ£o: CPA, RevShare, Ambos
  	- definir rotas de postback simuladas reais
  Gerenciar todas(excluir, editar link, etc.)
- PÃ¡gina para Ver lista de afiliados com:
  - nome, e-mail, cpf, telefone, valor ganho, status de pagamento
	OpÃ§Ãµes de gerenciamento(ver mais detalhes, aviso de demissÃ£o, etc)
- Dashboard:
  - Total de afiliados
  - Total de transaÃ§Ãµes
  - GrÃ¡ficos com receita por casa e afiliado
- Tabelas reativas com filtros
-PÃ¡gina de gerenciar pagamentos
-PÃ¡gina de conferir postbacks(logs, requisiÃ§Ãµes)
	defino um endereÃ§o e vejo o que estÃ¡ sendo recebido.

---

ğŸ” SEGURANÃ‡A E INTEGRAÃ‡ÃƒO
- Senhas criptografadas com Bcrypt
- Tokens JWT com `role` para proteger rotas
- Middleware:
  - `verifyToken`
  - `isAdmin`
- ValidaÃ§Ã£o de CPF e email Ãºnica
- ValidaÃ§Ã£o de dados no backend

---

ğŸ“„ ENV EXEMPLO
```

DATABASE\_URL=postgresql://usuario\:senha\@localhost:5432/afiliadosbet
JWT\_SECRET=superseguro

```

---

ğŸ“¦ FUNCIONALIDADES EXTRAS
- Toasts para erros/sucesso (frontend)
- Skeleton loader para listas
- Responsive design (mobile/tablet/desktop)
- Charts com dados simulados no dashboard
- Backend com CORS + Helmet

---

âœ… REQUISITOS FINAIS
- Todas as entidades devem estar ligadas entre si com chaves estrangeiras corretas
- Nenhuma casa deve ter afiliados automÃ¡ticos â€” vÃ­nculo ocorre ao clicar "Se Afiliar"
- Usar apenas as tabelas essenciais, mas com dados completos (como pessoais)
- Interface moderna e com identidade visual profissional
- Backend organizado com rotas REST completas

```

---


