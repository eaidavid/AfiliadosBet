üéØ Objetivo:
Corrigir a inconsist√™ncia na listagem de afiliados dentro do painel da plataforma. O sistema est√° com falhas ao exibir os usu√°rios afiliados, mesmo quando os cadastros e afilia√ß√µes ocorrem corretamente.

üìç Comportamento Esperado:
Todos os usu√°rios que se cadastram e que est√£o afiliados a alguma casa ativa (como Brazino) devem aparecer corretamente na aba ‚ÄúGerenciar Afiliados‚Äù.

Os dados exibidos na tabela devem estar em sincronia com:

O total de afiliados no painel administrativo

O total de afiliados na casa espec√≠fica

As a√ß√µes e postbacks associados

üß© Comportamento Atual (Bug):
A casa Brazino exibe 3 afiliados, mas:

A aba de ‚ÄúGerenciar Afiliados‚Äù mostra apenas 1 usu√°rio listado.

O painel administrativo mostra 1 afiliado total, gerando inconsist√™ncia com o card da casa.

üìÅ Pontos T√©cnicos a Verificar:
1. Query de Listagem de Afiliados
ts
Copiar
Editar
// Exemplo: server/controllers/affiliateController.ts (ou equivalente)
SELECT * FROM afiliados WHERE status = 'ativo' AND ...;
Certifique-se de que a query traz afiliados vinculados a casas ativas, mesmo que n√£o tenham gerado volume ou eventos ainda.

2. Rela√ß√£o entre Usu√°rio ‚Üî Afilia√ß√£o ‚Üî Casa
Verifique se h√° uma tabela pivot (ex: afiliacoes, user_affiliate_houses, etc.) com user_id, house_id e status.

Pode estar faltando um JOIN nessa tabela intermedi√°ria na consulta de listagem.

3. Filtro indevido por status ou volume
O sistema pode estar aplicando filtros como:

volume > 0

comissao > 0

Isso pode excluir afiliados leg√≠timos que ainda n√£o geraram retorno.

4. Sincroniza√ß√£o e contagem
O n√∫mero de afiliados exibido nas cards (como "Afiliados: 3") pode estar vindo de uma contagem bruta na base (ex: COUNT(*)), enquanto a listagem faz outra l√≥gica com filtro.

Ambos precisam usar a mesma base de contagem.

5. Cache ou revalida√ß√£o
Verifique se h√° algum cache ou uso de SWR, TanStack Query, etc., que pode estar exibindo dados desatualizados.

‚úÖ O que precisa ser feito:
Padronizar a l√≥gica de contagem e listagem de afiliados.

Rever a query da aba ‚ÄúGerenciar Afiliados‚Äù para garantir que todos os afiliados ativos vinculados a casas apare√ßam.

Garantir que casas e painel estejam exibindo os mesmos n√∫meros que a listagem real.

(Opcional) Adicionar badge na lista mostrando quantas casas o afiliado est√° vinculado para refor√ßar visualmente.