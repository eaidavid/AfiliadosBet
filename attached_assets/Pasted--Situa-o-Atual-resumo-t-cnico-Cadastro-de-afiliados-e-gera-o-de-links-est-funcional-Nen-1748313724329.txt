ğŸ§© SituaÃ§Ã£o Atual (resumo tÃ©cnico)
âœ… Cadastro de afiliados e geraÃ§Ã£o de links estÃ¡ funcional

âš ï¸ Nenhum evento (clique, registro, depÃ³sito) estÃ¡ sendo registrado

âš ï¸ Painel do usuÃ¡rio aparece vazio (sem comissÃµes, sem estatÃ­sticas)

âš ï¸ Painel admin sem dados e sem capacidade de gerenciamento

âš ï¸ Postbacks nÃ£o estÃ£o sendo processados

â±ï¸ VocÃª tem 10 minutos para entregar uma versÃ£o funcional

ğŸ¯ Requisitos detalhados com foco em painel admin gerenciÃ¡vel
ğŸ”§ 1. Admin deve conseguir gerenciar tudo, incluindo:
Recurso	AÃ§Ãµes que o admin precisa poder fazer
Afiliados	Ver, editar, aprovar/desativar, resetar senha
Casas de apostas	Criar, editar, deletar, configurar parÃ¢metros de postback
Links gerados	Ver links por afiliado, desativar, copiar
Eventos (postbacks)	Ver todos os registros, aprovar manualmente, deletar, corrigir valores se necessÃ¡rio
ComissÃµes	Ver total, editar valores manualmente, adicionar bÃ´nus
RelatÃ³rios	Gerar por perÃ­odo, exportar CSV/Excel
ConfiguraÃ§Ãµes do sistema	Editar regras de comissÃ£o, tokens de seguranÃ§a, IP whitelist, notificaÃ§Ãµes

ğŸ§ª 2. LÃ³gica de registro e rastreamento
Cliques: quando alguÃ©m acessa um link do tipo /go/casa?ref=123, o sistema deve:

Gravar o clique com data/hora, IP, user-agent, ID do afiliado e casa

Redirecionar o usuÃ¡rio para o link de destino da casa

Exemplo de estrutura:

json
Copiar
Editar
{
  "affiliate_id": 123,
  "house_id": 5,
  "type": "click",
  "ip": "192.168.0.10",
  "ua": "Mozilla/5.0",
  "timestamp": "2025-05-26 15:42"
}
Postbacks (registros, depÃ³sitos):

Endpoint como /api/postback?event=deposit&ref=123&amount=100&house_id=5

O sistema identifica o afiliado (ref), casa, tipo de evento, e valor

Aplica regra de comissÃ£o (ex: 30% do depÃ³sito)

Salva o evento e a comissÃ£o no banco

ğŸ“Š 3. PainÃ©is alimentados com dados reais
ğŸ§‘â€ğŸ’¼ Painel Admin
Dashboard com:

Total de afiliados

Total de cliques, registros, depÃ³sitos

ComissÃµes totais pagas

Casas com melhor performance

Abas para:

Gerenciar afiliados

Ver todos os postbacks

Editar comissÃµes

Filtros por data, casa, afiliado

ğŸ‘¤ Painel Afiliado
Tabela com:

Cliques por casa e data

DepÃ³sitos realizados

ComissÃ£o acumulada

Link personalizado para cada casa

GrÃ¡fico com evoluÃ§Ã£o diÃ¡ria ou semanal

âœ… Exemplo de checklist de correÃ§Ãµes para agora:
 Criar ou consertar endpoint /api/postback (GET e/ou POST)

 Criar lÃ³gica de rastreamento no /go/casa para registrar cliques

 Inserir registros no banco (clicks, events, commissions)

 Atualizar painel admin com listagens e gerenciamento

 Atualizar painel afiliado com estatÃ­sticas e comissÃ£o

 Garantir que admin possa editar tudo via painel (afiliados, eventos, valores, regras)

